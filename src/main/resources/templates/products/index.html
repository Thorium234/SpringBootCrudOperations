<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>spring</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  </head>
  <body>
	<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
	    <div class="container">
	        <a class="navbar-brand" href="/products">Product Store</a>
	        <ul class="navbar-nav ms-auto">
	            <li class="nav-item">
	                <a class="nav-link active" th:href="@{/products}">Products</a>
	            </li>
	            <li class="nav-item">
	                <a class="nav-link" th:href="@{/profile}">Profile</a>
	            </li>
	            <li class="nav-item">
	                <form method="post" th:action="@{/logout}" class="d-inline">
	                    <button type="submit" class="btn btn-link nav-link">Logout</button>
	                </form>
	            </li>
	        </ul>
	    </div>
	</nav>
    <div class="container">
		<h1 class="text-center my-4">PRODUCTS</h1>
		<a  class="btn btn-primary" href="/products/create">Create products</a>
		
		<table class="table">
		  <thead>
		    <tr>
		      <th>ID</th>
		      <th>NAME</th>
		      <th>BRAND</th>
		      <th>CATEGORY</th>
			  <th>PRICE</th>
			  <th>IMAGE</th>
			  <th>Date</th>
			  <th>ACTION</th>
		    </tr>
		  </thead>
		  <tbody>
			<!--we are filling the table using thymleaf-->
		    <tr th:each="product : ${products}">
		      <td th:text= "${product.id}"></td>
			  <td th:text= "${product.name}"></td>
			  <td th:text= "${product.brand}"></td>
			  <td th:text= "${product.category}"></td>
			  <td th:text= "'ksh. ' + ${product.price}"></td>
			  <td>
				<img th:src="@{'/images/' + ${product.imageFileName}}" alt="..." width="100">
			  </td>
			  <td th:text="${product.createdAt.toString().substring(0,10)}"></td>
			  <td style="white-space:nowrap">
				<a  class="btn btn-primary btn-sm" th:href="@{/products/edit(id=${product.id})}">Edit</a>
				<a  class="btn btn-secondary btn-sm" th:href="@{/products/delete(id=${product.id})}"
				 onclick="return confirm('Are you sure?')" >Delete</a>
			  </td>	
		    </tr>
		    
		  </tbody>
		</table>
	</div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
  </body>
</html>